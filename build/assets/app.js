window.addEventListener("load",function(){const y=document.getElementById("primary-navigation"),h=document.getElementById("primary-menu-toggle");y&&h&&h.addEventListener("click",function(n){n.preventDefault(),y.classList.toggle("hidden")});const x=document.querySelectorAll("[data-footer-accordion-item]");if(x.length){const n=window.matchMedia("(min-width: 768px)");x.forEach(function(o){const e=o.querySelector("[data-footer-accordion-trigger]"),t=o.querySelector("[data-footer-accordion-content]"),a=o.querySelector("[data-footer-accordion-icon]");if(!e||!t)return;const u=function(){t.classList.remove("max-h-96","opacity-100","pointer-events-auto"),t.classList.add("max-h-0","opacity-0","pointer-events-none"),t.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"),a&&a.classList.remove("rotate-45")},f=function(){t.classList.remove("max-h-0","opacity-0","pointer-events-none"),t.classList.add("max-h-96","opacity-100","pointer-events-auto"),t.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true"),a&&a.classList.add("rotate-45")},r=function(){n.matches?(t.classList.remove("max-h-0","max-h-96","opacity-0","opacity-100","pointer-events-none","pointer-events-auto"),t.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true"),a&&a.classList.remove("rotate-45")):u()};e.addEventListener("click",function(p){p.preventDefault(),e.getAttribute("aria-expanded")==="true"?u():f()}),r(),typeof n.addEventListener=="function"?n.addEventListener("change",r):typeof n.addListener=="function"&&n.addListener(r)})}const d=document.getElementById("global-lead-modal"),A=d?d.querySelector("[data-webseo-lead-form]"):null;if(d&&A){const n=d.querySelector("[data-lead-overlay]"),o=d.querySelector("[data-lead-dialog]"),e=d.querySelectorAll("[data-lead-close]"),t=d.querySelector("[data-lead-source-field]"),a=d.querySelector("[data-webseo-lead-message]"),u='a[href], button:not([disabled]), input:not([type="hidden"]):not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([-1])';let f=null,r=!1;const p=function(){a&&(a.textContent="",a.classList.add("hidden"),a.classList.remove("text-green-600","text-red-600"))},l=function(s){d.setAttribute("aria-hidden",s?"false":"true")},c=function(s){!r||s.key!=="Escape"||(s.preventDefault(),v())},g=function(s){if(!r||s.key!=="Tab"||!o)return;const i=o.querySelectorAll(u);if(!i.length)return;const m=i[0],L=i[i.length-1],b=document.activeElement;s.shiftKey?(b===m||b===o)&&(s.preventDefault(),L.focus()):b===L&&(s.preventDefault(),m.focus())},w=function(s=""){t&&(t.value=s||""),!r&&(r=!0,f=document.activeElement instanceof HTMLElement?document.activeElement:null,p(),d.classList.remove("hidden"),l(!0),document.body.classList.add("overflow-hidden"),window.requestAnimationFrame(function(){if(n&&(n.classList.remove("opacity-0","pointer-events-none"),n.classList.add("opacity-100","pointer-events-auto")),o){o.classList.remove("opacity-0","scale-95","translate-y-4","pointer-events-none"),o.classList.add("opacity-100","scale-100","translate-y-0");const i=o.querySelectorAll(u);if(i.length){const m=i[0];m&&typeof m.focus=="function"&&m.focus()}else o.focus()}}),document.addEventListener("keydown",c))},v=function(){r&&(r=!1,n&&(n.classList.remove("opacity-100","pointer-events-auto"),n.classList.add("opacity-0","pointer-events-none")),o&&(o.classList.remove("opacity-100","scale-100","translate-y-0"),o.classList.add("opacity-0","scale-95","translate-y-4","pointer-events-none")),document.removeEventListener("keydown",c),window.setTimeout(function(){d.classList.add("hidden"),l(!1),document.body.classList.remove("overflow-hidden"),f&&typeof f.focus=="function"&&f.focus(),f=null},200))},S=function(){document.querySelectorAll("[data-lead-trigger]").forEach(function(i){i.dataset.leadBound!=="true"&&(i.dataset.leadBound="true",i.addEventListener("click",function(m){m.preventDefault();const L=i.getAttribute("data-lead-source")||"";w(L)}))})};n&&n.addEventListener("click",function(s){s.preventDefault(),v()}),e.length&&e.forEach(function(s){s.addEventListener("click",function(i){i.preventDefault(),v()})}),d.addEventListener("keydown",g),S(),window.openLeadPopup=function(s=""){w(s)},window.closeLeadPopup=function(){v()}}else window.openLeadPopup=function(){},window.closeLeadPopup=function(){};const E=document.querySelectorAll("[data-webseo-lead-form]");E.length&&E.forEach(function(n){n.addEventListener("submit",function(o){if(!window.webseoLead||!window.webseoLead.ajaxUrl)return;o.preventDefault();const e=n.querySelector("[data-webseo-lead-message]"),t=n.querySelector("[data-webseo-lead-submit]"),a=t?t.getAttribute("data-webseo-loading-text"):"",u=window.webseoLead.messages||{},r=n.getAttribute("data-webseo-lead-success")||u.success||"✅ You’re in! Check your inbox.",p=u.error||"Something went wrong. Please try again.";e&&(e.textContent="",e.classList.add("hidden"),e.classList.remove("text-green-600","text-red-600")),t&&(t.disabled=!0,t.dataset.webseoOriginalText||(t.dataset.webseoOriginalText=t.textContent||""),a&&(t.textContent=a));const l=new FormData(n);l.append("action","add_webseo_lead"),window.webseoLead.nonce&&!l.has("webseo_lead_nonce")&&l.append("webseo_lead_nonce",window.webseoLead.nonce),window.webseoLead.pageTemplate&&!l.has("page_template")&&l.append("page_template",window.webseoLead.pageTemplate),l.has("page_url")||l.append("page_url",window.location.href),fetch(window.webseoLead.ajaxUrl,{method:"POST",credentials:"same-origin",body:l}).then(function(c){return c.json()}).then(function(c){const g=c&&c.success,w=c&&c.data&&c.data.message?c.data.message:g?r:p;e&&w&&(e.textContent=w,e.classList.remove("hidden"),g?(e.classList.remove("text-red-600"),e.classList.add("text-green-600")):(e.classList.remove("text-green-600"),e.classList.add("text-red-600"))),g&&n.reset()}).catch(function(){e&&(e.textContent=p,e.classList.remove("hidden","text-green-600"),e.classList.add("text-red-600"))}).finally(function(){if(t){t.disabled=!1;const c=t.dataset.webseoOriginalText||"";a&&(t.textContent=c)}})})})});
